{% extends "base.html" %} {% block title %}Home{% endblock %} {% block content
%}

<h1 align="center">Sports Games</h1>
<ul class="list-group list-group-flush" id="notes">
  {% for note in user.notes %}
  <li class="list-group-item">
    {{ note.data }}
    <button type="button" class="close" onClick="deleteNote({{ note.id }})">
      <span aria-hidden="true">&times;</span>
    </button>
  </li>
  {% endfor %}
</ul>

<!-- new file -->

    <script language = "javascript" type = "text/javascript">
        let yourDate = new Date()
        let date = yourDate.toISOString().split('T')[0]
        var htmlCall = "https://api.sportsdata.io/v3/nba/scores/json/GamesByDate/" + yourDate.toISOString().split('T')[0] + "?key=263917c8d8754c95b4b3971c110d89bc"

        // schedules and game day info
        // var htmlCall2 = "https://api.sportsdata.io/v3/nba/scores/json/CurrentSeason" + "?key=263917c8d8754c95b4b3971c110d89bc"

        // fetchAndLog() makes the API call and prints it to the webpage
        const fetchAndLog = async () => {
            const response = await fetch(htmlCall);
            const api_resp = await response.json();
            // just log �json�
            console.log(api_resp);

            // saves the json return data as a string

            var sports_table = '<th> <td>Home Team</td> <td>Away Team</td> <td>Date</td> <td>Time</td> <td>Register</td></th>'
            for (let x in api_resp) {
              var date = api_resp[x].DateTimeUTC.split('T')[0];
              var time = api_resp[x].DateTimeUTC.split('T')[1];
              var homeTeam = api_resp[x].HomeTeam
              var awayTeam = api_resp[x].AwayTeam
              var registerButton = '<button>Register</button>'
              sports_table += "<tr><td></td>" + "<td>" + homeTeam + "</td>" + "<td>" + awayTeam + "</td>" + "<td>" + date + "</td>" + "<td>" + time + "</td>" + "<td>" + registerButton + "</td></tr>";
            }
            document.getElementById('table').innerHTML = sports_table

            //var str = JSON.stringify(api_resp, null, 2);


            // prints the string
            //document.write(str);
        };

    </script>

    <table id="table">

    </table>

    <button type="button" onclick="fetchAndLog()">Show me the Schedules and Game Day info!</button>

{% endblock %}
